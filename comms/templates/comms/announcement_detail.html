{% extends "dashboard_base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-start mb-3">
  <div>
    <h4 class="mb-1">{{ announcement.title }}</h4>
    <div class="text-muted small">
      {% if announcement.pinned %}<span class="badge bg-warning text-dark me-2">Pinned</span>{% endif %}
      {% if announcement.publish_at %}Published {{ announcement.publish_at|date:'Y-m-d H:i' }}{% else %}Published{% endif %}
      by {{ announcement.author|default:'System' }}
      • {% with ds=announcement.departments.all %}
        {% if ds|length %}
          Targeted:
          {% for d in ds %}
            {{ d.name }}{% if not forloop.last %}, {% endif %}
          {% endfor %}
        {% else %}Global{% endif %}
      {% endwith %}
    </div>
  </div>
  <div id="read-btn-{{ announcement.id }}">
    {% include 'comms/_read_button.html' with announcement=announcement is_read=is_read %}
  </div>
</div>

<div class="card p-3">
  <div class="mb-0" style="white-space: pre-wrap;">{{ announcement.content }}</div>
</div>

<a class="btn btn-link mt-3" href="{% url 'announcement_list' %}">← Back to Announcements</a>
{% endblock %}
